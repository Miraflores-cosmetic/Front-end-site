@use '@/style/variables.scss' as *;

.productLoader {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 60vh;
  width: 100%;
}

.bestSellerContainer {
  padding: 0;
  min-height: 100vh;
  background-color: $white;
  overflow-x: hidden; // Предотвращаем горизонтальный скролл

  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE 10+ */
  max-width: 100%;
  margin: 0;
}

.productMain {
  max-width: 1536px;
  margin: 0 auto;
  padding: 24px 32px 0;

  @media (max-width: 450px) {
    padding: 24px 12px 0;
  }

  @media (max-width: 768px) {
    padding: 24px 12px 0;
  }
}

.bestSellerContainer {
  .bestSellerInfo {
    width: 100%;
    padding: 0;
    display: flex;
    align-items: stretch;
    gap: 32px;
    box-sizing: border-box;
    position: relative;
    
    @media (max-width: 450px) {
      gap: 0;
    }
    
    @media (max-width: 768px) {
      flex-direction: column;
      gap: 20px;
    }

    // Заголовок для мобилки - виден только на мобилке
    .titleMobile {
      display: none;
      
      @media (max-width: 768px) {
        display: block;
        color: #000;
        font-family: 'Oceanic', 'Avenir Next', 'Helvetica Neue', Arial, sans-serif;
        font-size: 24px;
        font-style: normal;
        font-weight: 300;
        line-height: normal;
        text-transform: uppercase;
        text-align: start;
        word-wrap: break-word;
        overflow-wrap: break-word;
        word-break: break-word;
        max-width: 100%;
        min-width: 0;
        box-sizing: border-box;
        margin-bottom: 20px;
        order: -1; // Размещаем перед другими элементами
      }

      @media (max-width: 450px) {
        font-size: 24px;
      }
    }
    
    .imagePart {
      flex: 0 0 calc((100% - 32px) / 2);
      width: calc((100% - 32px) / 2);
      min-width: 0;
      max-width: calc((100% - 32px) / 2);
      padding: 0;
      box-sizing: border-box;
      position: relative;
      aspect-ratio: 1;
      overflow: hidden;
      @media (max-width: 768px) {
        flex: 0 0 100%;
        width: 100%;
        max-width: 100%;
        aspect-ratio: 1;
      }
      
      .imageWrapper {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        width: 100%;
        height: 100%;
        animation: slideInFade 0.6s ease-out;
      }
      
      @keyframes slideInFade {
        0% {
          opacity: 0;
          transform: scale(0.95) translateY(10px);
        }
        100% {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }
      
      .discount {
        position: absolute;
        top: 0;
        left: 0;
        width: 54px;
        height: 43px;
        background: #297230;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: 'Avenir Next', sans-serif;
        font-style: normal;
        font-weight: 500;
        font-size: 14px;
        line-height: 19px;
        color: #FFFFFF;
        z-index: 2;
      }
      
      :global {
        .heroSlider {
          width: 100%;
          height: 100%;
          max-width: 100%;
          margin: 0;
        }
        .heroSlider .slick-list,
        .heroSlider .slick-track,
        .heroSlider .slick-slide,
        .heroSlider .slick-slide > div {
          height: 100%;
        }
      }
      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }
    }
    .infoPart {
      flex: 0 0 calc((100% - 32px) / 2); // Правильный расчет с учетом gap: (100% - gap) / 2
      width: calc((100% - 32px) / 2);
      min-width: 0;
      min-height: 0;
      max-width: calc((100% - 32px) / 2); // Ограничиваем максимальную ширину с учетом gap
      padding: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 0;
      box-sizing: border-box;
      overflow-x: hidden; // Предотвращаем горизонтальный overflow
      overflow-y: visible; // Разрешаем вертикальный overflow
      align-self: stretch;
      @media (max-width: 768px) {
        flex: 0 0 100%;
        width: 100%;
        max-width: 100%;
        gap: 50px;
        justify-content: flex-start;
      }

      .infoWrapper {
        display: flex;
        flex-direction: column;
        gap: 24px;
        width: 100%;
        max-width: 100%;
        min-width: 0; // Разрешаем сжатие
        box-sizing: border-box;
        word-wrap: break-word;
        overflow-wrap: break-word;
        overflow-x: hidden; // Предотвращаем горизонтальный overflow
        overflow-y: visible; // Разрешаем вертикальный overflow
        
        // Ограничиваем все дочерние элементы, кроме .desc
        > *:not(.desc) {
          max-width: 100%;
          min-width: 0;
          box-sizing: border-box;
        }
        
        .title {
          color: #000;
          font-family: 'Oceanic', 'Avenir Next', 'Helvetica Neue', Arial, sans-serif;
          font-size: 48px;
          font-style: normal;
          font-weight: 300;
          line-height: normal;
          text-transform: uppercase;
          text-align: start;
          word-wrap: break-word;
          overflow-wrap: break-word;
          word-break: break-word; // Принудительный перенос длинных слов
          max-width: 100%;
          min-width: 0; // Разрешаем сжатие
          box-sizing: border-box;
          
          @media (max-width: 768px) {
            display: none; // Скрываем на мобилке
          }
          
          @media (max-width: 450px) {
            font-size: 24px;
          }
        }

        .reviewsLink {
          display: inline-block;
          text-decoration: none;
          color: inherit;
          cursor: pointer;
        }
        
        // Стили для описания - без ограничений по высоте
        .desc,
        p.desc {
          color: #6e6d67 !important;
          font-size: 16px !important;
          word-wrap: break-word !important;
          overflow-wrap: break-word !important;
          word-break: break-word !important; // Принудительный перенос длинных слов
          max-width: 100% !important;
          min-width: 0 !important; // Разрешаем сжатие
          box-sizing: border-box !important;
          overflow: visible !important; // Полностью убираем overflow
          overflow-x: visible !important;
          overflow-y: visible !important;
          text-overflow: clip !important; // Убираем ellipsis
          display: block !important; // Убираем -webkit-box если был
          -webkit-line-clamp: unset !important; // Убираем ограничение по строкам
          line-clamp: unset !important;
          -webkit-box-orient: unset !important; // Убираем вертикальную ориентацию
          max-height: none !important; // Убираем ограничение по высоте
          height: auto !important; // Автоматическая высота
          white-space: normal !important; // Разрешаем перенос строк
          line-height: 1.5 !important; // Добавляем нормальный межстрочный интервал
        }
        
        // Ограничиваем компоненты SizeTabs внутри infoWrapper
        :global {
          .sizeTabs,
          .wrapper {
            max-width: 100%;
            min-width: 0;
            box-sizing: border-box;
            overflow-x: hidden;
          }
        }
      }
      .bottomWrapper {
        display: flex;
        flex-direction: column;
        gap: 32px;
        width: 100%;
        max-width: 100%;
        min-width: 0; // Разрешаем сжатие
        box-sizing: border-box;
        overflow-x: hidden; // Предотвращаем горизонтальный overflow
        overflow-y: visible; // Разрешаем вертикальный overflow
        position: relative;
        top: -6px;
        
        // Добавляем margin-top для блока этапов на странице товара
        > :first-child {
          margin-top: 40px;
        }
        
        // Ограничиваем ширину всех дочерних элементов
        > * {
          max-width: 100%;
          min-width: 0;
          box-sizing: border-box;
          overflow-x: hidden; // Предотвращаем выход содержимого за пределы
        }
        
        // Ограничиваем компоненты внутри
        :global {
          .sizeTabs,
          .etaps,
          .addToBasket {
            max-width: 100%;
            min-width: 0;
            box-sizing: border-box;
          }
        }
      }
    }
  }
}

// Секции на странице товара (BestSellerTabs, BestSellerEtaps) — отступы задаёт .productMain
.productSections {
  box-sizing: border-box;
}
